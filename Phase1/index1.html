<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FileShare and User Group Drive Migration Hub</title>
  <style>
    body {
      font-family: Aptos, sans-serif;
      margin: 0;
      background-color: #d3d3d3; /* Grey background */
    }

    header {
      background-color: #00008B; /* Dark blue */
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 1.8em;
      font-weight: bold;
    }

    .viewer {
      max-width: 800px;
      margin: 30px auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      padding: 20px;
      min-height: 300px;
      overflow-y: auto;
      text-align: center;
    }

    .viewer h2 {
      color: #4169E1; /* Royal blue */
      margin-bottom: 20px;
    }

    .card {
      display: none;
      padding: 15px;
      font-size: 1.1em;
    }

    .card.active {
      display: block;
    }

    .nav-buttons {
      text-align: center;
      margin-top: 15px;
    }

    .nav-buttons button {
      background-color: #00008B; /* Dark blue */
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 0 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    .nav-buttons button:hover {
      background-color: #27408b; /* Dark slate blue */
    }

    .progress {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>FileShare and User Group Drive Migration Hub</header>

  <div class="viewer" id="cards-container">
    <h2>Phase 1 â€“ Read-Only Restricted Access</h2>
    <!-- cards1.html fragment will be injected below -->
  </div>

  <!-- Robust loader: fetch -> safely insert -> scoped selectors -> attach handlers -->
  <script>
  (async () => {
    const container = document.getElementById('cards-container');

    try {
      // IMPORTANT: cards1.html must be in the same folder as index1.html
      const response = await fetch('cards1.html', { cache: 'no-store' });
      if (!response.ok) throw new Error(`HTTP ${response.status}`);
      const html = await response.text();

      // Parse into a temporary node to avoid innerHTML nesting quirks
      const temp = document.createElement('div');
      temp.innerHTML = html.trim();

      // Move parsed children into the real container (preserves events & structure)
      while (temp.firstChild) {
        container.appendChild(temp.firstChild);
      }

      // Scope all queries to the container (prevents collisions across phases)
      const cards   = container.querySelectorAll('.card');
      const progress = container.querySelector('#progress');
      const nextBtn  = container.querySelector('#nextBtn');
      const prevBtn  = container.querySelector('#prevBtn');

      if (!cards.length) throw new Error('No .card elements found after insert.');
      if (!nextBtn || !prevBtn || !progress) {
        throw new Error('Missing controls (#nextBtn, #prevBtn, #progress) in cards1.html.');
      }

      let currentIndex = 0;

      function updateCard() {
        cards.forEach(c => c.classList.remove('active'));
        cards[currentIndex].classList.add('active');
        progress.textContent = `Card ${currentIndex + 1} of ${cards.length}`;
      }

      nextBtn.addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % cards.length;
        updateCard();
      });

      prevBtn.addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + cards.length) % cards.length;
        updateCard();
      });

      // Show first card
      updateCard();
    } catch (err) {
      console.error('Error loading cards1.html:', err);
      container.insertAdjacentHTML(
        'beforeend',
        `<p style="color:#b00020;">Could not load cards. ${String(err)}</p>`
      );
    }
  })();
  </script>
</body>
</html>
